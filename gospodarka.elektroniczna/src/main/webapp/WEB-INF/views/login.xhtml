<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:c="http://java.sun.com/jsp/jstl/core"
	xmlns:p="http://primefaces.org/ui">
<f:view contentType="text/html">
	<h:head>
		<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
		<link rel="stylesheet" href="${request.contextPath}/app/resources/styles/style.css" type="text/css"/>
		<title>Logowanie</title>
	</h:head>
	
	<h:body>
		<div style="display: table; margin: 0 auto; border: 1px solid white; padding: 25px; margin-top: 100px; border-radius: 25px;">
			<h1>Logowanie</h1>
	        <c:if test="#{not empty param.login_error}">
	            <div class="error">
	                Logowanie zakończone porażką.<br/> Powód:
	                <span style="font-weight: bold; color: red;">#{sessionScope.SPRING_SECURITY_LAST_EXCEPTION.message}</span>
	            </div>
	        </c:if>
	        <form name="f" action="${request.contextPath}/app/j_spring_security_check" method="post">
	            <p>
	                Użytkownik: <br />
	                <c:if test="${not empty param.login_error}">
	                    <c:set var="username" value="#{usernameExtractor.extractUsername(sessionScope.SPRING_SECURITY_LAST_EXCEPTION)}" />
	                </c:if>
	                <input type="text" id="username" name="username" value="#{username}" />
	            </p>
	            <p>
	                Hasło: <br /> <input type="password" id="password" name="password" />
	            </p>
	            <input type="hidden" name="${_csrf.parameterName}" value="${_csrf.token}"/>
	            <input name="submit" type="submit" value="Login" />
	        </form>
        </div>
	</h:body>
</f:view>
</html>
